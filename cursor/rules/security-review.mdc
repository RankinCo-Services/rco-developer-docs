---
description: Before every commit, follow the security-review-before-commit skill; only recommend commit if the review reports PASS or the user explicitly approves.
alwaysApply: true
---

# Security review on every code change

- **Before every commit:** Before recommending or proceeding with any commit, you **must** follow the security-review-before-commit skill. Read `.cursor/skills/security-review-before-commit/SKILL.md` and execute its steps in order. Do not substitute your own review or skip steps; follow the skill exactly.
- **Architecture review:** **Architecture review** (for Beacon/Beacon-based apps: `.cursor/references/beacon-architecture-rules.md`; for other projects: any project-specific architecture doc) is **mandatory** before every commit and deploy; run it after the security review. Security and architecture reviews are mandatory for all commits, pushes, deploys, and for any Cursor plans and solution planning. Do not recommend commit or deploy until both pass or the user explicitly approves exceptions.
- **No exceptions:** Every change set that is about to be committed must be reviewed by following the skill. The skill uses the rules in `.cursor/references/security-rules.md` and, for Beacon/Beacon-based apps, `.cursor/references/beacon-architecture-rules.md`.
- **Make the review visible:** After following the skill, you **must** show the user the compliance report produced by the skill (Result: PASS/FAIL, Rules checked, Violations, Recommendation). Do not recommend commit without first showing this report so the user can verify the review ran.
- **Commit only on PASS or approval:** Recommend committing only if the skill's report is **PASS**, or the user has explicitly approved documented exceptions. If the report is **FAIL**, list the findings and suggest fixes; do not recommend commit until issues are fixed or the user approves an exception.
- **After a FAIL:** Before recommending commit after a FAIL, you **must** show how each finding was handled. Either (1) **re-run the skill** on the updated changes and show the new report, or (2) list each finding with **"Fixed: [brief description]"** or **"Approved exception: [user approved]"**. Do not recommend commit until you have shown this.
- **Do not skip:** Do not skip the skill or proceed despite FAIL unless there is a compelling reason. If you must skip or override: (1) describe the issue to the user, (2) outline your plan, (3) await explicit user authorization before proceeding.
- This rule is always applied so the skill is run automatically as part of the commit workflow for every change.
